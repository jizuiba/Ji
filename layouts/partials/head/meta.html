{{ $title := .Title }}
{{ if eq $title "" }}
  {{ $title = .Site.Title }}
{{ else }}
  {{ $title = printf "%s | %s" $title .Site.Title }}
{{ end }}

<title>{{ $title }}</title>

{{ if .Description }}
  <meta name="description" content="{{ .Description }}">
{{ else if .Summary }}
  <meta name="description" content="{{ .Summary | truncate 160 }}">
{{ else if .Site.Params.description }}
  <meta name="description" content="{{ .Site.Params.description }}">
{{ end }}

{{ if .Keywords }}
  <meta name="keywords" content="{{ delimit .Keywords ", " }}">
{{ else if .Site.Params.keywords }}
  <meta name="keywords" content="{{ delimit .Site.Params.keywords ", " }}">
{{ end }}

{{ if .Params.author }}
  <meta name="author" content="{{ .Params.author }}">
{{ else if .Site.Params.author }}
  <meta name="author" content="{{ .Site.Params.author }}">
{{ end }}

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:title" content="{{ $title }}">
<meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else if .Summary }}{{ .Summary | truncate 160 }}{{ else if .Site.Params.description }}{{ .Site.Params.description }}{{ end }}">
<meta property="og:site_name" content="{{ .Site.Title }}">

{{ if .Params.featured_image }}
  <meta property="og:image" content="{{ .Params.featured_image | absURL }}">
{{ else if .Site.Params.ogImage }}
  <meta property="og:image" content="{{ .Site.Params.ogImage | absURL }}">
{{ end }}

{{ if .IsPage }}
  <meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
  <meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
  {{ if .Params.author }}
    <meta property="article:author" content="{{ .Params.author }}">
  {{ end }}
  {{ if .Params.categories }}
    {{ range .Params.categories }}
      <meta property="article:section" content="{{ . }}">
    {{ end }}
  {{ end }}
  {{ if .Params.tags }}
    {{ range .Params.tags }}
      <meta property="article:tag" content="{{ . }}">
    {{ end }}
  {{ end }}
{{ end }}

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="{{ .Permalink }}">
<meta property="twitter:title" content="{{ $title }}">
<meta property="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else if .Summary }}{{ .Summary | truncate 160 }}{{ else if .Site.Params.description }}{{ .Site.Params.description }}{{ end }}">

{{ if .Params.featured_image }}
  <meta property="twitter:image" content="{{ .Params.featured_image | absURL }}">
{{ else if .Site.Params.ogImage }}
  <meta property="twitter:image" content="{{ .Site.Params.ogImage | absURL }}">
{{ end }}

{{ if .Site.Params.twitterSite }}
  <meta property="twitter:site" content="{{ .Site.Params.twitterSite }}">
{{ end }}

{{ if .Site.Params.twitterCreator }}
  <meta property="twitter:creator" content="{{ .Site.Params.twitterCreator }}">
{{ end }}

<!-- Canonical URL -->
<link rel="canonical" href="{{ .Permalink }}">

<!-- RSS -->
{{ range .AlternativeOutputFormats -}}
  {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
{{ end -}}

<!-- Favicon -->
{{ if .Site.Params.favicon }}
  <link rel="icon" type="image/x-icon" href="{{ .Site.Params.favicon | relURL }}">
{{ end }}

<!-- Theme Color -->
{{ if .Site.Params.themeColor }}
  <meta name="theme-color" content="{{ .Site.Params.themeColor }}">
{{ end }}
