{{ define "main" }}
<main id="pjax-box" class="single">
  <!-- 文章信息头部 -->
  <section class="post-info narrow">
    <div class="screen">
      <div class="post-info-content">
        <div class="banner-reveal">
          <div class="category-tags-row">
            {{ if .Params.categories }}
              <div class="category">
                {{ range .Params.categories }}
                    <a href="{{ "/categories/" | relLangURL }}{{ . | urlize }}" class="category-tag">
                      <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16">
                        <path d="M512.228 572.01a87.402 87.402 0 0 1-35.24-7.405L52.592 377.602C22.89 364.51 4.169 336.921 3.75 305.612c-0.437-31.22 17.472-59.224 46.697-73.08L474.844 31.44c23.428-11.078 51.382-11.099 74.808 0.02l423.922 201.09c29.204 13.868 47.092 41.862 46.676 73.081-0.437 31.289-19.139 58.857-48.82 71.95L547.528 564.605a87.814 87.814 0 0 1-35.3 7.405zM88.568 304.46l421.22 185.732c1.469 0.637 3.434 0.645 4.944-0.01l420.702-185.603-420.643-199.64v-0.01c-1.509-0.715-3.593-0.724-5.122 0L88.568 304.46z m851.075 2.114h0.199-0.2z m-427.215 694.3c-11.774 0-23.666-2.64-34.745-7.962L67.186 815.36C46.577 806.446 37.087 782.51 46 761.903c8.915-20.608 32.839-30.138 53.468-21.174l411.967 178.209 392.829-177.91c20.41-9.291 44.532-0.288 53.844 20.19 9.291 20.44 0.258 44.553-20.172 53.845L545.96 993.25c-10.463 5.062-21.937 7.624-33.531 7.624z" fill="currentColor"></path>
                        <path d="M921.103 515.924l-409.32 177.864-408.976-177.48v83.716a38.967 38.967 0 0 0 23.62 35.817l343.061 146.99c13.433 6.489 27.874 9.723 42.297 9.723s28.862-3.234 42.296-9.723L897.5 635.488a38.967 38.967 0 0 0 23.603-35.81v-83.753z" fill="currentColor"></path>
                      </svg> {{ . }}
                    </a>
                {{ end }}
              </div>
            {{ end }}

            {{ if .Params.tags }}
              <div class="tags">
                {{ range .Params.tags }}
                  <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" class="tag">
                    <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16">
                      <path d="M920.528912 444.49616l-340.111125-340.114737a135.932464 135.932464 0 0 0-96.155899-39.758503L200.418112 64.662657h-0.018063C125.275769 64.662657 64.301413 125.40943 64.301413 200.548159v283.673992a136.091412 136.091412 0 0 0 39.881326 96.199248l340.230335 340.241173a136.022775 136.022775 0 0 0 192.369598 0l283.74624-283.76069c53.128139-53.131752 53.128139-139.277583 0-192.405722z m-45.209673 147.192436l-283.746241 283.760691a72.064544 72.064544 0 0 1-101.924964 0l-340.212273-340.241173A72.187367 72.187367 0 0 1 128.241582 484.218538V200.548159A72.021195 72.021195 0 0 1 200.396437 128.602826l283.843776-0.039737a71.887535 71.887535 0 0 1 50.935389 21.053294l340.114737 340.1039a72.104281 72.104281 0 0 1 0.0289 101.968313z" fill="currentColor"></path>
                      <path d="M384.002258 255.999097c-70.69543 0-128.003161 57.307731-128.003161 128.003161S313.306828 511.998194 384.002258 511.998194s127.999548-57.307731 127.999548-127.999549S454.690463 255.999097 384.002258 255.999097z m45.296371 173.29592a64.059379 64.059379 0 1 1 18.759396-45.292759 63.640337 63.640337 0 0 1-18.763008 45.292759z" fill="currentColor"></path>
                    </svg> {{ . }}
                  </a>
                {{ end }}
              </div>
            {{ end }}
          </div>

          <div class="msg">
            <span>{{ .Date.Format (.Site.Params.dateFormat | default "2006年1月2日") }}</span>
            <span class="drop">·</span>
            <span>{{ .WordCount }} 字</span>
          </div>
        </div>

        <div class="title-box main-reveal">
          <div class="title">{{ .Title }}</div>
          {{ if .Params.subtitle }}
            <div class="subtitle">{{ .Params.subtitle }}</div>
          {{ end }}
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Image -->
  {{ if .Params.featured_image }}
    <section class="feature-image" aria-label="文章特色图片">
      <div class="screen">
        <div class="feature-image-content">
          <figure class="feature-image-wrapper">
            <img 
              src="{{ .Params.featured_image | absURL }}" 
              alt="{{ .Title }}" 
              class="feature-img"
              loading="eager"
              decoding="async"
            >
            {{ if .Params.featured_image_caption }}
              <figcaption class="feature-image-caption">{{ .Params.featured_image_caption }}</figcaption>
            {{ end }}
          </figure>
        </div>
      </div>
    </section>
  {{ end }}

  <!-- 文章内容和TOC -->
  <section class="single post-content narrow">
    <div class="screen">
      <div class="content-and-toc{{ if not .TableOfContents }} no-toc{{ end }}">
        <div class="content main-reveal">
          {{ .Content }}
        </div>

        {{ if .TableOfContents }}
          <div class="toc-container main-reveal">
            {{ partial "toc.html" . }}
          </div>
        {{ end }}
      </div>
    </div>
  </section>

  <!-- 分享按钮 -->
  {{ if .Site.Params.shareButtons }}
    <section class="post-share">
      <div class="screen">
        {{ partial "share-buttons.html" . }}
      </div>
    </section>
  {{ end }}

  <!-- 相关文章 -->
  {{ if .Site.Params.relatedPosts }}
    <section class="related-posts">
      <div class="screen">
        {{ partial "related-posts.html" . }}
      </div>
    </section>
  {{ end }}
</main>


{{ end }}
